{
  "architecture_evolution": "\ngraph TB\n    subgraph \"\u00c9tat Actuel (Olympe v2.0)\"\n        CurrentBT[BehaviorTree JSON]\n        CurrentBT --> CurrentNodes[Nodes: Sequence, Selector, Action, Condition]\n        CurrentNodes --> CurrentRuntime[BehaviorTreeRuntime Component]\n        CurrentRuntime --> CurrentExec[Ex\u00e9cution directe dans ECS]\n    end\n\n    subgraph \"Future: Atomic Task System\"\n        ATGraph[Task Graph Template JSON]\n        ATGraph --> ATNodes[\"Nodes: Start, Task, Branch, Loop, Wait...\"]\n        ATNodes --> Compiler[Task Graph Compiler]\n        Compiler --> OptimizedTree[Optimized Task Tree (Read-Only Asset)]\n\n        Entity1[Entity A: Guard NPC]\n        Entity2[Entity B: Door Script]\n\n        Entity1 --> Runner1[TaskRunner Component A]\n        Entity2 --> Runner2[TaskRunner Component B]\n\n        Runner1 --> Blackboard1[Local Blackboard A<br/>CurrentNode: 3<br/>PatrolIndex: 2<br/>AlertLevel: 0.3]\n        Runner2 --> Blackboard2[Local Blackboard B<br/>CurrentNode: 1<br/>IsOpen: false]\n\n        Runner1 -.References.-> OptimizedTree\n        Runner2 -.References.-> OptimizedTree\n\n        TaskSystem[TaskSystem ECS] --> Runner1\n        TaskSystem --> Runner2\n        TaskSystem --> AtomicLibrary[Atomic Task Library C++]\n    end\n\n    style CurrentBT fill:#ffe0b2\n    style ATGraph fill:#c8e6c9\n    style OptimizedTree fill:#fff9c4\n    style Blackboard1 fill:#ffccbc\n    style Blackboard2 fill:#ffccbc\n",
  "runtime_architecture": "\ngraph TB\n    subgraph \"Asset Layer (Design Time)\"\n        Designer[Game Designer] -->|Authors| GraphJSON[TaskGraph.json]\n        GraphJSON -->|Contains| Nodes[Node Definitions<br/>Variables<br/>Connections]\n    end\n\n    subgraph \"Compilation Layer (Load Time)\"\n        GraphJSON -->|Parsed by| Loader[TaskGraphLoader]\n        Loader -->|Validates| Schema[JSON Schema Validator]\n        Schema -->|Generates| Template[TaskGraphTemplate<br/>Read-Only Shared Asset]\n        Template -->|Cached in| AssetManager[AssetManager Singleton]\n    end\n\n    subgraph \"Runtime Layer (Per Entity)\"\n        World[ECS World] -->|Creates| EntityA[Entity 42: NPC Guard]\n        EntityA -->|Has Component| TaskRunner[TaskRunnerComponent<br/>- TemplateID<br/>- CurrentNodeIndex<br/>- StateTimer]\n\n        TaskRunner -->|Owns| LocalBB[LocalBlackboard<br/>Memory Block<br/>- Variables<br/>- Node State]\n\n        TaskRunner -.References.-> Template\n\n        TaskSystem[TaskSystem::Update]\n        TaskSystem -->|Iterates| TaskRunner\n        TaskSystem -->|Reads| Template\n        TaskSystem -->|Reads/Writes| LocalBB\n        TaskSystem -->|Calls| ATLibrary[Atomic Task C++ Functions]\n\n        ATLibrary -->|Accesses| ECSComponents[Other ECS Components<br/>Movement, Health, AISenses...]\n    end\n\n    style GraphJSON fill:#e1f5fe\n    style Template fill:#fff9c4\n    style LocalBB fill:#ffccbc\n    style TaskRunner fill:#c8e6c9\n",
  "node_type_mapping": "\ngraph LR\n    subgraph \"Backend Types (C++)\"\n        B1[RootNode / EventStart]\n        B2[Selector]\n        B3[Sequence]\n        B4[Parallel]\n        B5[Branch]\n        B6[Loop]\n        B7[AtomicTask Leaf]\n        B8[SetVariable]\n        B9[Compare]\n    end\n\n    subgraph \"Editor UI (Designer View)\"\n        U1[Start / OnBegin<br/>\u25b6\ufe0f Vert]\n        U2[Try / Fallback<br/>\u2753 Violet]\n        U3[Sequence / Do All<br/>\u27a1\ufe0f Bleu]\n        U4[Do Together<br/>\ud83d\udd00 Orange]\n        U5[Branch If/Else<br/>\ud83d\udc8e Gris]\n        U6[Repeat / Loop<br/>\ud83d\udd01 Bleu fonc\u00e9]\n        U7[Task / Action<br/>\u26a1 Jaune]\n        U8[Set Variable<br/>\ud83d\udcdd Blanc]\n        U9[Check Value<br/>\u2696\ufe0f Gris clair]\n    end\n\n    B1 --> U1\n    B2 --> U2\n    B3 --> U3\n    B4 --> U4\n    B5 --> U5\n    B6 --> U6\n    B7 --> U7\n    B8 --> U8\n    B9 --> U9\n\n    style U1 fill:#4caf50\n    style U2 fill:#9c27b0\n    style U3 fill:#2196f3\n    style U4 fill:#ff9800\n    style U5 fill:#757575\n    style U6 fill:#1565c0\n    style U7 fill:#ffeb3b\n    style U8 fill:#fafafa\n    style U9 fill:#bdbdbd\n"
}